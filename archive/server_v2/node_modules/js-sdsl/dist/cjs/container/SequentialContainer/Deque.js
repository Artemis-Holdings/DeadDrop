"use strict";

Object.defineProperty(exports, "t", {
    value: true
});

exports.default = void 0;

var _Base = _interopRequireDefault(require("./Base"));

var _RandomIterator = require("./Base/RandomIterator");

function _interopRequireDefault(t) {
    return t && t.t ? t : {
        default: t
    };
}

class DequeIterator extends _RandomIterator.RandomIterator {
<<<<<<< HEAD
    copy() {
        return new DequeIterator(this.o, this.D, this.R, this.N, this.iteratorType);
=======
    constructor(t, i, s) {
        super(t, s);
        this.container = i;
    }
    copy() {
        return new DequeIterator(this.o, this.container, this.iteratorType);
>>>>>>> e66b3631... init-tmn
    }
}

class Deque extends _Base.default {
<<<<<<< HEAD
    constructor(t = [], s = 1 << 12) {
        super();
        this.P = 0;
        this.A = 0;
        this.F = 0;
        this.j = 0;
        this.O = 0;
        this.T = [];
        let i;
        if ("size" in t) {
            if (typeof t.size === "number") {
                i = t.size;
            } else {
                i = t.size();
            }
        } else if ("length" in t) {
            i = t.length;
        } else {
            throw new RangeError("Can't get container's size!");
        }
        this.V = s;
        this.O = Math.max(Math.ceil(i / this.V), 1);
        for (let t = 0; t < this.O; ++t) {
            this.T.push(new Array(this.V));
        }
        const h = Math.ceil(i / this.V);
        this.P = this.F = (this.O >> 1) - (h >> 1);
        this.A = this.j = this.V - i % this.V >> 1;
=======
    constructor(t = [], i = 1 << 12) {
        super();
        this.j = 0;
        this.D = 0;
        this.R = 0;
        this.N = 0;
        this.P = 0;
        this.A = [];
        const s = (() => {
            if (typeof t.length === "number") return t.length;
            if (typeof t.size === "number") return t.size;
            if (typeof t.size === "function") return t.size();
            throw new TypeError("Cannot get the length or size of the container");
        })();
        this.F = i;
        this.P = Math.max(Math.ceil(s / this.F), 1);
        for (let t = 0; t < this.P; ++t) {
            this.A.push(new Array(this.F));
        }
        const h = Math.ceil(s / this.F);
        this.j = this.R = (this.P >> 1) - (h >> 1);
        this.D = this.N = this.F - s % this.F >> 1;
>>>>>>> e66b3631... init-tmn
        const e = this;
        t.forEach((function(t) {
            e.pushBack(t);
        }));
<<<<<<< HEAD
        this.size = this.size.bind(this);
        this.getElementByPos = this.getElementByPos.bind(this);
        this.setElementByPos = this.setElementByPos.bind(this);
    }
    G() {
        const t = [];
        const s = Math.max(this.O >> 1, 1);
        for (let i = 0; i < s; ++i) {
            t[i] = new Array(this.V);
        }
        for (let s = this.P; s < this.O; ++s) {
            t[t.length] = this.T[s];
        }
        for (let s = 0; s < this.F; ++s) {
            t[t.length] = this.T[s];
        }
        t[t.length] = [ ...this.T[this.F] ];
        this.P = s;
        this.F = t.length - 1;
        for (let i = 0; i < s; ++i) {
            t[t.length] = new Array(this.V);
        }
        this.T = t;
        this.O = t.length;
    }
    J(t) {
        const s = this.A + t + 1;
        const i = s % this.V;
        let h = i - 1;
        let e = this.P + (s - i) / this.V;
        if (i === 0) e -= 1;
        e %= this.O;
        if (h < 0) h += this.V;
=======
    }
    T() {
        const t = [];
        const i = Math.max(this.P >> 1, 1);
        for (let s = 0; s < i; ++s) {
            t[s] = new Array(this.F);
        }
        for (let i = this.j; i < this.P; ++i) {
            t[t.length] = this.A[i];
        }
        for (let i = 0; i < this.R; ++i) {
            t[t.length] = this.A[i];
        }
        t[t.length] = [ ...this.A[this.R] ];
        this.j = i;
        this.R = t.length - 1;
        for (let s = 0; s < i; ++s) {
            t[t.length] = new Array(this.F);
        }
        this.A = t;
        this.P = t.length;
    }
    O(t) {
        const i = this.D + t + 1;
        const s = i % this.F;
        let h = s - 1;
        let e = this.j + (i - s) / this.F;
        if (s === 0) e -= 1;
        e %= this.P;
        if (h < 0) h += this.F;
>>>>>>> e66b3631... init-tmn
        return {
            curNodeBucketIndex: e,
            curNodePointerIndex: h
        };
    }
    clear() {
<<<<<<< HEAD
        this.T = [ [] ];
        this.O = 1;
        this.P = this.F = this.i = 0;
        this.A = this.j = this.V >> 1;
    }
    begin() {
        return new DequeIterator(0, this.size, this.getElementByPos, this.setElementByPos);
    }
    end() {
        return new DequeIterator(this.i, this.size, this.getElementByPos, this.setElementByPos);
    }
    rBegin() {
        return new DequeIterator(this.i - 1, this.size, this.getElementByPos, this.setElementByPos, 1);
    }
    rEnd() {
        return new DequeIterator(-1, this.size, this.getElementByPos, this.setElementByPos, 1);
    }
    front() {
        return this.T[this.P][this.A];
    }
    back() {
        return this.T[this.F][this.j];
    }
    pushBack(t) {
        if (this.i) {
            if (this.j < this.V - 1) {
                this.j += 1;
            } else if (this.F < this.O - 1) {
                this.F += 1;
                this.j = 0;
            } else {
                this.F = 0;
                this.j = 0;
            }
            if (this.F === this.P && this.j === this.A) this.G();
        }
        this.i += 1;
        this.T[this.F][this.j] = t;
=======
        this.A = [ new Array(this.F) ];
        this.P = 1;
        this.j = this.R = this.i = 0;
        this.D = this.N = this.F >> 1;
    }
    begin() {
        return new DequeIterator(0, this);
    }
    end() {
        return new DequeIterator(this.i, this);
    }
    rBegin() {
        return new DequeIterator(this.i - 1, this, 1);
    }
    rEnd() {
        return new DequeIterator(-1, this, 1);
    }
    front() {
        if (this.i === 0) return;
        return this.A[this.j][this.D];
    }
    back() {
        if (this.i === 0) return;
        return this.A[this.R][this.N];
    }
    pushBack(t) {
        if (this.i) {
            if (this.N < this.F - 1) {
                this.N += 1;
            } else if (this.R < this.P - 1) {
                this.R += 1;
                this.N = 0;
            } else {
                this.R = 0;
                this.N = 0;
            }
            if (this.R === this.j && this.N === this.D) this.T();
        }
        this.i += 1;
        this.A[this.R][this.N] = t;
>>>>>>> e66b3631... init-tmn
        return this.i;
    }
    popBack() {
        if (this.i === 0) return;
<<<<<<< HEAD
        const t = this.T[this.F][this.j];
        delete this.T[this.F][this.j];
        if (this.i !== 1) {
            if (this.j > 0) {
                this.j -= 1;
            } else if (this.F > 0) {
                this.F -= 1;
                this.j = this.V - 1;
            } else {
                this.F = this.O - 1;
                this.j = this.V - 1;
=======
        const t = this.A[this.R][this.N];
        if (this.i !== 1) {
            if (this.N > 0) {
                this.N -= 1;
            } else if (this.R > 0) {
                this.R -= 1;
                this.N = this.F - 1;
            } else {
                this.R = this.P - 1;
                this.N = this.F - 1;
>>>>>>> e66b3631... init-tmn
            }
        }
        this.i -= 1;
        return t;
    }
    pushFront(t) {
        if (this.i) {
<<<<<<< HEAD
            if (this.A > 0) {
                this.A -= 1;
            } else if (this.P > 0) {
                this.P -= 1;
                this.A = this.V - 1;
            } else {
                this.P = this.O - 1;
                this.A = this.V - 1;
            }
            if (this.P === this.F && this.A === this.j) this.G();
        }
        this.i += 1;
        this.T[this.P][this.A] = t;
=======
            if (this.D > 0) {
                this.D -= 1;
            } else if (this.j > 0) {
                this.j -= 1;
                this.D = this.F - 1;
            } else {
                this.j = this.P - 1;
                this.D = this.F - 1;
            }
            if (this.j === this.R && this.D === this.N) this.T();
        }
        this.i += 1;
        this.A[this.j][this.D] = t;
>>>>>>> e66b3631... init-tmn
        return this.i;
    }
    popFront() {
        if (this.i === 0) return;
<<<<<<< HEAD
        const t = this.T[this.P][this.A];
        delete this.T[this.P][this.A];
        if (this.i !== 1) {
            if (this.A < this.V - 1) {
                this.A += 1;
            } else if (this.P < this.O - 1) {
                this.P += 1;
                this.A = 0;
            } else {
                this.P = 0;
                this.A = 0;
=======
        const t = this.A[this.j][this.D];
        if (this.i !== 1) {
            if (this.D < this.F - 1) {
                this.D += 1;
            } else if (this.j < this.P - 1) {
                this.j += 1;
                this.D = 0;
            } else {
                this.j = 0;
                this.D = 0;
>>>>>>> e66b3631... init-tmn
            }
        }
        this.i -= 1;
        return t;
    }
    getElementByPos(t) {
        if (t < 0 || t > this.i - 1) {
            throw new RangeError;
        }
<<<<<<< HEAD
        const {curNodeBucketIndex: s, curNodePointerIndex: i} = this.J(t);
        return this.T[s][i];
    }
    setElementByPos(t, s) {
        if (t < 0 || t > this.i - 1) {
            throw new RangeError;
        }
        const {curNodeBucketIndex: i, curNodePointerIndex: h} = this.J(t);
        this.T[i][h] = s;
    }
    insert(t, s, i = 1) {
=======
        const {curNodeBucketIndex: i, curNodePointerIndex: s} = this.O(t);
        return this.A[i][s];
    }
    setElementByPos(t, i) {
        if (t < 0 || t > this.i - 1) {
            throw new RangeError;
        }
        const {curNodeBucketIndex: s, curNodePointerIndex: h} = this.O(t);
        this.A[s][h] = i;
    }
    insert(t, i, s = 1) {
>>>>>>> e66b3631... init-tmn
        if (t < 0 || t > this.i) {
            throw new RangeError;
        }
        if (t === 0) {
<<<<<<< HEAD
            while (i--) this.pushFront(s);
        } else if (t === this.i) {
            while (i--) this.pushBack(s);
        } else {
            const h = [];
            for (let s = t; s < this.i; ++s) {
                h.push(this.getElementByPos(s));
            }
            this.cut(t - 1);
            for (let t = 0; t < i; ++t) this.pushBack(s);
=======
            while (s--) this.pushFront(i);
        } else if (t === this.i) {
            while (s--) this.pushBack(i);
        } else {
            const h = [];
            for (let i = t; i < this.i; ++i) {
                h.push(this.getElementByPos(i));
            }
            this.cut(t - 1);
            for (let t = 0; t < s; ++t) this.pushBack(i);
>>>>>>> e66b3631... init-tmn
            for (let t = 0; t < h.length; ++t) this.pushBack(h[t]);
        }
        return this.i;
    }
    cut(t) {
        if (t < 0) {
            this.clear();
            return 0;
        }
<<<<<<< HEAD
        const {curNodeBucketIndex: s, curNodePointerIndex: i} = this.J(t);
        this.F = s;
        this.j = i;
=======
        const {curNodeBucketIndex: i, curNodePointerIndex: s} = this.O(t);
        this.R = i;
        this.N = s;
>>>>>>> e66b3631... init-tmn
        this.i = t + 1;
        return this.i;
    }
    eraseElementByPos(t) {
        if (t < 0 || t > this.i - 1) {
            throw new RangeError;
        }
        if (t === 0) this.popFront(); else if (t === this.i - 1) this.popBack(); else {
<<<<<<< HEAD
            const s = [];
            for (let i = t + 1; i < this.i; ++i) {
                s.push(this.getElementByPos(i));
            }
            this.cut(t);
            this.popBack();
            const i = this;
            s.forEach((function(t) {
                i.pushBack(t);
=======
            const i = [];
            for (let s = t + 1; s < this.i; ++s) {
                i.push(this.getElementByPos(s));
            }
            this.cut(t);
            this.popBack();
            const s = this;
            i.forEach((function(t) {
                s.pushBack(t);
>>>>>>> e66b3631... init-tmn
            }));
        }
        return this.i;
    }
    eraseElementByValue(t) {
        if (this.i === 0) return 0;
<<<<<<< HEAD
        const s = [];
        for (let i = 0; i < this.i; ++i) {
            const h = this.getElementByPos(i);
            if (h !== t) s.push(h);
        }
        const i = s.length;
        for (let t = 0; t < i; ++t) this.setElementByPos(t, s[t]);
        return this.cut(i - 1);
    }
    eraseElementByIterator(t) {
        const s = t.o;
        this.eraseElementByPos(s);
=======
        const i = [];
        for (let s = 0; s < this.i; ++s) {
            const h = this.getElementByPos(s);
            if (h !== t) i.push(h);
        }
        const s = i.length;
        for (let t = 0; t < s; ++t) this.setElementByPos(t, i[t]);
        return this.cut(s - 1);
    }
    eraseElementByIterator(t) {
        const i = t.o;
        this.eraseElementByPos(i);
>>>>>>> e66b3631... init-tmn
        t = t.next();
        return t;
    }
    find(t) {
<<<<<<< HEAD
        for (let s = 0; s < this.i; ++s) {
            if (this.getElementByPos(s) === t) {
                return new DequeIterator(s, this.size, this.getElementByPos, this.setElementByPos);
=======
        for (let i = 0; i < this.i; ++i) {
            if (this.getElementByPos(i) === t) {
                return new DequeIterator(i, this);
>>>>>>> e66b3631... init-tmn
            }
        }
        return this.end();
    }
    reverse() {
        let t = 0;
<<<<<<< HEAD
        let s = this.i - 1;
        while (t < s) {
            const i = this.getElementByPos(t);
            this.setElementByPos(t, this.getElementByPos(s));
            this.setElementByPos(s, i);
            t += 1;
            s -= 1;
=======
        let i = this.i - 1;
        while (t < i) {
            const s = this.getElementByPos(t);
            this.setElementByPos(t, this.getElementByPos(i));
            this.setElementByPos(i, s);
            t += 1;
            i -= 1;
>>>>>>> e66b3631... init-tmn
        }
    }
    unique() {
        if (this.i <= 1) {
            return this.i;
        }
        let t = 1;
<<<<<<< HEAD
        let s = this.getElementByPos(0);
        for (let i = 1; i < this.i; ++i) {
            const h = this.getElementByPos(i);
            if (h !== s) {
                s = h;
=======
        let i = this.getElementByPos(0);
        for (let s = 1; s < this.i; ++s) {
            const h = this.getElementByPos(s);
            if (h !== i) {
                i = h;
>>>>>>> e66b3631... init-tmn
                this.setElementByPos(t++, h);
            }
        }
        while (this.i > t) this.popBack();
        return this.i;
    }
    sort(t) {
<<<<<<< HEAD
        const s = [];
        for (let t = 0; t < this.i; ++t) {
            s.push(this.getElementByPos(t));
        }
        s.sort(t);
        for (let t = 0; t < this.i; ++t) this.setElementByPos(t, s[t]);
=======
        const i = [];
        for (let t = 0; t < this.i; ++t) {
            i.push(this.getElementByPos(t));
        }
        i.sort(t);
        for (let t = 0; t < this.i; ++t) this.setElementByPos(t, i[t]);
>>>>>>> e66b3631... init-tmn
    }
    shrinkToFit() {
        if (this.i === 0) return;
        const t = [];
<<<<<<< HEAD
        this.forEach((function(s) {
            t.push(s);
        }));
        this.O = Math.max(Math.ceil(this.i / this.V), 1);
        this.i = this.P = this.F = this.A = this.j = 0;
        this.T = [];
        for (let t = 0; t < this.O; ++t) {
            this.T.push(new Array(this.V));
        }
        for (let s = 0; s < t.length; ++s) this.pushBack(t[s]);
    }
    forEach(t) {
        for (let s = 0; s < this.i; ++s) {
            t(this.getElementByPos(s), s, this);
=======
        this.forEach((function(i) {
            t.push(i);
        }));
        this.P = Math.max(Math.ceil(this.i / this.F), 1);
        this.i = this.j = this.R = this.D = this.N = 0;
        this.A = [];
        for (let t = 0; t < this.P; ++t) {
            this.A.push(new Array(this.F));
        }
        for (let i = 0; i < t.length; ++i) this.pushBack(t[i]);
    }
    forEach(t) {
        for (let i = 0; i < this.i; ++i) {
            t(this.getElementByPos(i), i, this);
>>>>>>> e66b3631... init-tmn
        }
    }
    [Symbol.iterator]() {
        return function*() {
            for (let t = 0; t < this.i; ++t) {
                yield this.getElementByPos(t);
            }
        }.bind(this)();
    }
}

var _default = Deque;

exports.default = _default;
//# sourceMappingURL=Deque.js.map
